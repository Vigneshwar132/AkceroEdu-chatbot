{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (username, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/auth/login`, {\n          username,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async (username, password, studentClass, email) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/auth/register`, {\n          username,\n          password,\n          student_class: studentClass,\n          email\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n        setToken(null);\n        setUser(null);\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        register,\n        logout,\n        isLoading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"mX4/AXRUN66G8j/NKXHYWKblzjI=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":137,"map":[[15,2,24,0,"Object"],[15,8,24,0],[15,9,24,0,"defineProperty"],[15,23,24,0],[15,24,24,0,"exports"],[15,31,24,0],[16,4,24,0,"enumerable"],[16,14,24,0],[17,4,24,0,"get"],[17,7,24,0],[17,18,24,0,"get"],[17,19,24,0],[18,6,24,0],[18,13,24,0,"AuthProvider"],[18,25,24,0],[19,4,24,0],[20,2,24,0],[21,2,107,0,"Object"],[21,8,107,0],[21,9,107,0,"defineProperty"],[21,23,107,0],[21,24,107,0,"exports"],[21,31,107,0],[22,4,107,0,"enumerable"],[22,14,107,0],[23,4,107,0,"get"],[23,7,107,0],[23,18,107,0,"get"],[23,19,107,0],[24,6,107,0],[24,13,107,0,"useAuth"],[24,20,107,0],[25,4,107,0],[26,2,107,0],[27,2,113,2],[27,6,113,2,"_expoVirtualEnv"],[27,21,113,2],[27,24,113,2,"require"],[27,31,113,2],[27,32,113,2,"_dependencyMap"],[27,46,113,2],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,42,2,0],[29,45,2,0,"require"],[29,52,2,0],[29,53,2,0,"_dependencyMap"],[29,67,2,0],[30,2,2,0],[30,6,2,0,"AsyncStorage"],[30,18,2,0],[30,21,2,0,"_interopDefault"],[30,36,2,0],[30,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[30,73,2,0],[31,2,3,0],[31,6,3,0,"_axios"],[31,12,3,0],[31,15,3,0,"require"],[31,22,3,0],[31,23,3,0,"_dependencyMap"],[31,37,3,0],[32,2,3,0],[32,6,3,0,"axios"],[32,11,3,0],[32,14,3,0,"_interopDefault"],[32,29,3,0],[32,30,3,0,"_axios"],[32,36,3,0],[33,2,3,26],[33,6,3,26,"_reactJsxDevRuntime"],[33,25,3,26],[33,28,3,26,"require"],[33,35,3,26],[33,36,3,26,"_dependencyMap"],[33,50,3,26],[34,2,20,0],[34,8,20,6,"AuthContext"],[34,19,20,17],[34,35,20,20],[34,39,20,20,"createContext"],[34,45,20,33],[34,46,20,33,"createContext"],[34,59,20,33],[34,61,20,63,"undefined"],[34,70,20,72],[34,71,20,73],[35,2,22,0],[35,8,22,6,"API_URL"],[35,15,22,13],[35,18,22,16,"_expoVirtualEnv"],[35,33,22,16],[35,34,22,16,"env"],[35,37,22,16],[35,38,22,16,"EXPO_PUBLIC_BACKEND_URL"],[35,61,22,16],[35,64,22,54],[35,70,22,60],[36,2,24,7],[36,8,24,13,"AuthProvider"],[36,20,24,66],[36,23,24,69,"AuthProvider"],[36,24,24,70],[37,4,24,72,"children"],[38,2,24,81],[38,3,24,82],[38,8,24,87],[39,4,24,87,"_s"],[39,6,24,87],[40,4,25,2],[40,10,25,8],[40,11,25,9,"user"],[40,15,25,13],[40,17,25,15,"setUser"],[40,24,25,22],[40,25,25,23],[40,28,25,26],[40,32,25,26,"useState"],[40,38,25,34],[40,39,25,34,"useState"],[40,47,25,34],[40,49,25,48],[40,53,25,52],[40,54,25,53],[41,4,26,2],[41,10,26,8],[41,11,26,9,"token"],[41,16,26,14],[41,18,26,16,"setToken"],[41,26,26,24],[41,27,26,25],[41,30,26,28],[41,34,26,28,"useState"],[41,40,26,36],[41,41,26,36,"useState"],[41,49,26,36],[41,51,26,52],[41,55,26,56],[41,56,26,57],[42,4,27,2],[42,10,27,8],[42,11,27,9,"isLoading"],[42,20,27,18],[42,22,27,20,"setIsLoading"],[42,34,27,32],[42,35,27,33],[42,38,27,36],[42,42,27,36,"useState"],[42,48,27,44],[42,49,27,44,"useState"],[42,57,27,44],[42,59,27,45],[42,63,27,49],[42,64,27,50],[43,4,29,2],[43,8,29,2,"useEffect"],[43,14,29,11],[43,15,29,11,"useEffect"],[43,24,29,11],[43,26,29,12],[43,32,29,18],[44,6,30,4,"loadStoredAuth"],[44,20,30,18],[44,21,30,19],[44,22,30,20],[45,4,31,2],[45,5,31,3],[45,7,31,5],[45,9,31,7],[45,10,31,8],[46,4,33,2],[46,10,33,8,"loadStoredAuth"],[46,24,33,22],[46,27,33,25],[46,33,33,25,"loadStoredAuth"],[46,34,33,25],[46,39,33,37],[47,6,34,4],[47,10,34,8],[48,8,35,6],[48,14,35,12,"storedToken"],[48,25,35,23],[48,28,35,26],[48,34,35,32,"AsyncStorage"],[48,46,35,44],[48,47,35,44,"default"],[48,54,35,44],[48,55,35,45,"getItem"],[48,62,35,52],[48,63,35,53],[48,70,35,60],[48,71,35,61],[49,8,36,6],[49,14,36,12,"storedUser"],[49,24,36,22],[49,27,36,25],[49,33,36,31,"AsyncStorage"],[49,45,36,43],[49,46,36,43,"default"],[49,53,36,43],[49,54,36,44,"getItem"],[49,61,36,51],[49,62,36,52],[49,68,36,58],[49,69,36,59],[50,8,38,6],[50,12,38,10,"storedToken"],[50,23,38,21],[50,27,38,25,"storedUser"],[50,37,38,35],[50,39,38,37],[51,10,39,8,"setToken"],[51,18,39,16],[51,19,39,17,"storedToken"],[51,30,39,28],[51,31,39,29],[52,10,40,8,"setUser"],[52,17,40,15],[52,18,40,16,"JSON"],[52,22,40,20],[52,23,40,21,"parse"],[52,28,40,26],[52,29,40,27,"storedUser"],[52,39,40,37],[52,40,40,38],[52,41,40,39],[53,8,41,6],[54,6,42,4],[54,7,42,5],[54,8,42,6],[54,15,42,13,"error"],[54,20,42,18],[54,22,42,20],[55,8,43,6,"console"],[55,15,43,13],[55,16,43,14,"error"],[55,21,43,19],[55,22,43,20],[55,43,43,41],[55,45,43,43,"error"],[55,50,43,48],[55,51,43,49],[56,6,44,4],[56,7,44,5],[56,16,44,14],[57,8,45,6,"setIsLoading"],[57,20,45,18],[57,21,45,19],[57,26,45,24],[57,27,45,25],[58,6,46,4],[59,4,47,2],[59,5,47,3],[60,4,49,2],[60,10,49,8,"login"],[60,15,49,13],[60,18,49,16],[60,24,49,16,"login"],[60,25,49,23,"username"],[60,33,49,39],[60,35,49,41,"password"],[60,43,49,57],[60,48,49,62],[61,6,50,4],[61,10,50,8],[62,8,51,6],[62,14,51,12,"response"],[62,22,51,20],[62,25,51,23],[62,31,51,29,"axios"],[62,36,51,34],[62,37,51,34,"default"],[62,44,51,34],[62,45,51,35,"post"],[62,49,51,39],[62,50,51,40],[62,53,51,43,"API_URL"],[62,60,51,50],[62,73,51,63],[62,75,51,65],[63,10,52,8,"username"],[63,18,52,16],[64,10,53,8,"password"],[65,8,54,6],[65,9,54,7],[65,10,54,8],[66,8,56,6],[66,14,56,12],[67,10,56,14,"access_token"],[67,22,56,26],[68,10,56,28,"user"],[68,14,56,32],[68,16,56,34,"userData"],[69,8,56,43],[69,9,56,44],[69,12,56,47,"response"],[69,20,56,55],[69,21,56,56,"data"],[69,25,56,60],[70,8,58,6],[70,14,58,12,"AsyncStorage"],[70,26,58,24],[70,27,58,24,"default"],[70,34,58,24],[70,35,58,25,"setItem"],[70,42,58,32],[70,43,58,33],[70,50,58,40],[70,52,58,42,"access_token"],[70,64,58,54],[70,65,58,55],[71,8,59,6],[71,14,59,12,"AsyncStorage"],[71,26,59,24],[71,27,59,24,"default"],[71,34,59,24],[71,35,59,25,"setItem"],[71,42,59,32],[71,43,59,33],[71,49,59,39],[71,51,59,41,"JSON"],[71,55,59,45],[71,56,59,46,"stringify"],[71,65,59,55],[71,66,59,56,"userData"],[71,74,59,64],[71,75,59,65],[71,76,59,66],[72,8,61,6,"setToken"],[72,16,61,14],[72,17,61,15,"access_token"],[72,29,61,27],[72,30,61,28],[73,8,62,6,"setUser"],[73,15,62,13],[73,16,62,14,"userData"],[73,24,62,22],[73,25,62,23],[74,6,63,4],[74,7,63,5],[74,8,63,6],[74,15,63,13,"error"],[74,20,63,23],[74,22,63,25],[75,8,64,6],[75,14,64,12],[75,18,64,16,"Error"],[75,23,64,21],[75,24,64,22,"error"],[75,29,64,27],[75,30,64,28,"response"],[75,38,64,36],[75,40,64,38,"data"],[75,44,64,42],[75,46,64,44,"detail"],[75,52,64,50],[75,56,64,54],[75,70,64,68],[75,71,64,69],[76,6,65,4],[77,4,66,2],[77,5,66,3],[78,4,68,2],[78,10,68,8,"register"],[78,18,68,16],[78,21,68,19],[78,27,68,19,"register"],[78,28,68,26,"username"],[78,36,68,42],[78,38,68,44,"password"],[78,46,68,60],[78,48,68,62,"studentClass"],[78,60,68,82],[78,62,68,84,"email"],[78,67,68,98],[78,72,68,103],[79,6,69,4],[79,10,69,8],[80,8,70,6],[80,14,70,12,"response"],[80,22,70,20],[80,25,70,23],[80,31,70,29,"axios"],[80,36,70,34],[80,37,70,34,"default"],[80,44,70,34],[80,45,70,35,"post"],[80,49,70,39],[80,50,70,40],[80,53,70,43,"API_URL"],[80,60,70,50],[80,76,70,66],[80,78,70,68],[81,10,71,8,"username"],[81,18,71,16],[82,10,72,8,"password"],[82,18,72,16],[83,10,73,8,"student_class"],[83,23,73,21],[83,25,73,23,"studentClass"],[83,37,73,35],[84,10,74,8,"email"],[85,8,75,6],[85,9,75,7],[85,10,75,8],[86,8,77,6],[86,14,77,12],[87,10,77,14,"access_token"],[87,22,77,26],[88,10,77,28,"user"],[88,14,77,32],[88,16,77,34,"userData"],[89,8,77,43],[89,9,77,44],[89,12,77,47,"response"],[89,20,77,55],[89,21,77,56,"data"],[89,25,77,60],[90,8,79,6],[90,14,79,12,"AsyncStorage"],[90,26,79,24],[90,27,79,24,"default"],[90,34,79,24],[90,35,79,25,"setItem"],[90,42,79,32],[90,43,79,33],[90,50,79,40],[90,52,79,42,"access_token"],[90,64,79,54],[90,65,79,55],[91,8,80,6],[91,14,80,12,"AsyncStorage"],[91,26,80,24],[91,27,80,24,"default"],[91,34,80,24],[91,35,80,25,"setItem"],[91,42,80,32],[91,43,80,33],[91,49,80,39],[91,51,80,41,"JSON"],[91,55,80,45],[91,56,80,46,"stringify"],[91,65,80,55],[91,66,80,56,"userData"],[91,74,80,64],[91,75,80,65],[91,76,80,66],[92,8,82,6,"setToken"],[92,16,82,14],[92,17,82,15,"access_token"],[92,29,82,27],[92,30,82,28],[93,8,83,6,"setUser"],[93,15,83,13],[93,16,83,14,"userData"],[93,24,83,22],[93,25,83,23],[94,6,84,4],[94,7,84,5],[94,8,84,6],[94,15,84,13,"error"],[94,20,84,23],[94,22,84,25],[95,8,85,6],[95,14,85,12],[95,18,85,16,"Error"],[95,23,85,21],[95,24,85,22,"error"],[95,29,85,27],[95,30,85,28,"response"],[95,38,85,36],[95,40,85,38,"data"],[95,44,85,42],[95,46,85,44,"detail"],[95,52,85,50],[95,56,85,54],[95,77,85,75],[95,78,85,76],[96,6,86,4],[97,4,87,2],[97,5,87,3],[98,4,89,2],[98,10,89,8,"logout"],[98,16,89,14],[98,19,89,17],[98,25,89,17,"logout"],[98,26,89,17],[98,31,89,29],[99,6,90,4],[99,10,90,8],[100,8,91,6],[100,14,91,12,"AsyncStorage"],[100,26,91,24],[100,27,91,24,"default"],[100,34,91,24],[100,35,91,25,"removeItem"],[100,45,91,35],[100,46,91,36],[100,53,91,43],[100,54,91,44],[101,8,92,6],[101,14,92,12,"AsyncStorage"],[101,26,92,24],[101,27,92,24,"default"],[101,34,92,24],[101,35,92,25,"removeItem"],[101,45,92,35],[101,46,92,36],[101,52,92,42],[101,53,92,43],[102,8,93,6,"setToken"],[102,16,93,14],[102,17,93,15],[102,21,93,19],[102,22,93,20],[103,8,94,6,"setUser"],[103,15,94,13],[103,16,94,14],[103,20,94,18],[103,21,94,19],[104,6,95,4],[104,7,95,5],[104,8,95,6],[104,15,95,13,"error"],[104,20,95,18],[104,22,95,20],[105,8,96,6,"console"],[105,15,96,13],[105,16,96,14,"error"],[105,21,96,19],[105,22,96,20],[105,42,96,40],[105,44,96,42,"error"],[105,49,96,47],[105,50,96,48],[106,6,97,4],[107,4,98,2],[107,5,98,3],[108,4,100,2],[108,24,101,4],[108,28,101,4,"_reactJsxDevRuntime"],[108,47,101,4],[108,48,101,4,"jsxDEV"],[108,54,101,4],[108,56,101,5,"AuthContext"],[108,67,101,16],[108,68,101,17,"Provider"],[108,76,101,25],[109,6,101,26,"value"],[109,11,101,31],[109,13,101,33],[110,8,101,35,"user"],[110,12,101,39],[111,8,101,41,"token"],[111,13,101,46],[112,8,101,48,"login"],[112,13,101,53],[113,8,101,55,"register"],[113,16,101,63],[114,8,101,65,"logout"],[114,14,101,71],[115,8,101,73,"isLoading"],[116,6,101,83],[116,7,101,85],[117,6,101,85,"children"],[117,14,101,85],[117,16,102,7,"children"],[118,4,102,15],[119,6,102,15,"fileName"],[119,14,102,15],[119,16,102,15,"_jsxFileName"],[119,28,102,15],[120,6,102,15,"lineNumber"],[120,16,102,15],[121,6,102,15,"columnNumber"],[121,18,102,15],[122,4,102,15],[122,11,103,26],[122,12,103,27],[123,2,105,0],[123,3,105,1],[124,2,105,2,"_s"],[124,4,105,2],[124,5,24,13,"AuthProvider"],[124,17,24,66],[125,2,24,66,"_c"],[125,4,24,66],[125,7,24,13,"AuthProvider"],[125,19,24,66],[126,2,107,7],[126,8,107,13,"useAuth"],[126,15,107,20],[126,18,107,23,"useAuth"],[126,19,107,23],[126,24,107,29],[127,4,107,29,"_s2"],[127,7,107,29],[128,4,108,2],[128,10,108,8,"context"],[128,17,108,15],[128,20,108,18],[128,24,108,18,"useContext"],[128,30,108,28],[128,31,108,28,"useContext"],[128,41,108,28],[128,43,108,29,"AuthContext"],[128,54,108,40],[128,55,108,41],[129,4,109,2],[129,8,109,6,"context"],[129,15,109,13],[129,20,109,18,"undefined"],[129,29,109,27],[129,31,109,29],[130,6,110,4],[130,12,110,10],[130,16,110,14,"Error"],[130,21,110,19],[130,22,110,20],[130,67,110,65],[130,68,110,66],[131,4,111,2],[132,4,112,2],[132,11,112,9,"context"],[132,18,112,16],[133,2,113,0],[133,3,113,1],[134,2,113,2,"_s2"],[134,5,113,2],[134,6,107,13,"useAuth"],[134,13,107,20],[135,2,107,20],[135,6,107,20,"_c"],[135,8,107,20],[136,2,107,20,"$RefreshReg$"],[136,14,107,20],[136,15,107,20,"_c"],[136,17,107,20],[137,0,107,20],[137,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","useAuth"],"mappings":"AAA;qECuB;YCK;GDE;yBEE;GFc;gBGE;GHiB;mBIE;GJmB;iBKE;GLS;CDO;uBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}